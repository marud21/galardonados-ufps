<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Convocatoria</title>
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        /* Estilos adicionales para centrar el formulario */
        .create-convocatoria {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 160px); /* Ajusta el tamaño según la altura del header y footer */
        }
        .convocatoria-form {
            background-color: #fff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <img src="/Img/logo_ufps.jpg" alt="Logo de la Universidad" class="logo">
                <div class="header-right">
                    <h1>Sistema de Reconocimiento de Premios</h1>
                    <nav>
                        <div class="dropdown">
                            <button class="dropbtn">&#9776;</button>
                            <div class="dropdown-content">
                                <a href="/html/Login.html">Iniciar sesión</a>
                                <a href="/html/registro.html">Registrarse</a>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section class="create-convocatoria">
            <form action="#" class="convocatoria-form">
                <h2>Crear Convocatoria para Egresados</h2>
                <div class="form-group">
                    <label for="nombre">Nombre de la convocatoria</label>
                    <input type="text" id="nombre" name="nombre" required>
                </div>
                <div class="form-group">
                    <label for="categoria">Categoría</label>
                    <select id="categoria" name="categoria" required>
                        <option value="">Seleccione una categoría</option>
                        <option value="investigacion">Investigación</option>
                        <option value="merito_academico">Mérito Académico</option>
                        <option value="proyectos">Proyectos</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="descripcion">Logros y Méritos</label>
                    <textarea id="descripcion" name="descripcion" rows="5" required></textarea>
                </div>
                <div class="form-group">
                    <label for="encargado">Encargado/a de la convocatoria</label>
                    <input type="text" id="encargado" name="encargado" required>
                </div>
                <div class="form-group">
                    <label for="fecha_inicio">Fecha de inicio</label>
                    <input type="date" id="fecha_inicio" name="fecha_inicio" required>
                </div>
                <div class="form-group">
                    <label for="fecha_fin">Fecha de fin</label>
                    <input type="date" id="fecha_fin" name="fecha_fin" required>
                </div>
                <div class="form-group">
                    <label for="documentos">Subir documentos</label>
                    <input type="file" id="documentos" name="documentos" accept=".pdf,.doc,.docx" multiple>
                </div>
                <button type="submit" class="button">Publicar Convocatoria</button>
            </form>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2023 Universidad Francisco de Paula Santander</p>
        </div>
    </footer>

    <script>
        // Script para manejar la publicación de la convocatoria
        document.querySelector(".convocatoria-form").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevenir el envío del formulario por defecto

            // Obtener los valores de los campos del formulario
            const nombre = document.getElementById("nombre").value;
            const categoria = document.getElementById("categoria").value;
            const descripcion = document.getElementById("descripcion").value;
            const encargado = document.getElementById("encargado").value;
            const fechaInicio = document.getElementById("fecha_inicio").value;
            const fechaFin = document.getElementById("fecha_fin").value;

            // Crear un objeto de convocatoria con los datos obtenidos
            const nuevaConvocatoria = {
                nombre,
                categoria,
                descripcion,
                encargado,
                fechaInicio,
                fechaFin,
                estado: "Abierta"
            };

            // Obtener las convocatorias existentes de localStorage o inicializar como un array vacío
            let convocatorias = JSON.parse(localStorage.getItem("convocatorias")) || [];
            // Añadir la nueva convocatoria al array
            convocatorias.push(nuevaConvocatoria);
            // Guardar las convocatorias actualizadas en localStorage
            localStorage.setItem("convocatorias", JSON.stringify(convocatorias));

            // Redirigir a la página de gestión de convocatorias
            window.location.href = "estadoconvocatoria.html";
        });
    </script>
</body>
</html>
